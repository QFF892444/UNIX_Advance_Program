# 习题

## 第五章

5.1 具体源代码程序见 setvbuf_use.c

5.2 fgets函数读入数据，直到行结束或缓冲区满（留出一个字节存放最终的null字节）。fputs只负责将缓冲区的内容输出直到遇到null字节，而不考虑缓冲区是否包含换行符。所以如果MAXLINE设的小，两个函数仍能正常工作，只不过缓冲区大时，函数被执行的次数要多于MAXLINE值设置较大的时候

5.3 没有输出字符，即printf("");

5.4 因为getchar返回的是int型值，而char是无符号数，int转换为无符号数与EOF，值为-1相比较，永远不会相等，改程序形成死循环。

5.5 先调用fflush函数后调用fsync函数，保证文件系统与缓冲区内容一致。fsync所使用的参数由fileno函数获得，如果不调用fflush，所有的数据仍然在内存缓冲区内，此时调用fsync将没有任何效果。

5.6 标准输入和标准输出均为行缓冲方式，fgetc每次调用stdin均会冲洗缓冲区。